(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[385],{6056:function(e,t,a){Promise.resolve().then(a.bind(a,5059))},5059:function(e,t,a){"use strict";a.d(t,{CopenhagenDemo:function(){return h}});var s=a(7437),r=a(2265),l=a(5980),i=a(858),n=a(9763);let o=(0,n.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),c=(0,n.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),d=(0,n.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),m=(0,n.Z)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),x=(0,n.Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);function h(){let[e,t]=(0,r.useState)("idle"),[a,n]=(0,r.useState)(null),[h,p]=(0,r.useState)([]),[y,u]=(0,r.useState)([]),[g,f]=(0,r.useState)(!1),b=(0,r.useCallback)(async e=>{try{n(null),t("uploading"),t("ocr");let a=new FormData;a.append("file",e);let s=await fetch("/api/ocr",{method:"POST",body:a});if(!s.ok){let e=await s.json();throw Error(e.error||"OCR failed")}let r=await s.json();t("normalizing");let l=await fetch("/api/normalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({raw:r.text})});if(!l.ok)throw Error("Text normalization failed");let i=await l.json();p(i.artists),t("generating");let o=i.artists.map(e=>e.name),c=await fetch("/api/previewPlaylist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({artists:o,limitPerArtist:2})});if(!c.ok)throw Error("Playlist generation failed");let d=await c.json();u(d.tracks),t("complete")}catch(e){console.error("Processing error:",e),n(e instanceof Error?e.message:"Something went wrong"),t("error")}},[]),j=(0,r.useCallback)(e=>{e.preventDefault(),f(!1);let t=Array.from(e.dataTransfer.files).find(e=>e.type.startsWith("image/"));t&&b(t)},[b]),v=(0,r.useCallback)(e=>{e.preventDefault(),f(!0)},[]),N=(0,r.useCallback)(e=>{e.preventDefault(),f(!1)},[]),w=(0,r.useCallback)(e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&b(a)},[b]),k=()=>{switch(e){case"uploading":return"Uploading image...";case"ocr":return"Reading festival poster...";case"normalizing":return"Extracting artist names...";case"generating":return"Creating playlist...";case"complete":return"Found ".concat(y.length," tracks from ").concat(h.length," artists!");case"error":return a||"Something went wrong";default:return"Upload a festival poster to get started"}},S=()=>{t("idle"),n(null),p([]),u([])};return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-display font-bold text-white mb-4",children:"Festival Playlist Generator"}),(0,s.jsx)("p",{className:"text-xl text-slate-300",children:"Upload a festival poster and I'll create a Spotify playlist for you"})]}),(0,s.jsxs)(l.M,{mode:"wait",children:[("idle"===e||"error"===e)&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"relative border-2 border-dashed rounded-lg p-12 text-center transition-colors ".concat(g?"border-primary-400 bg-primary-500/10":"border-slate-600 hover:border-slate-500"),onDrop:j,onDragOver:v,onDragLeave:N,children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:w,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,s.jsx)(o,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Drop a festival poster here"}),(0,s.jsx)("p",{className:"text-slate-400 mb-4",children:"or click to browse your files"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Supports PNG, JPG, WebP up to 5MB"}),"error"===e&&(0,s.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center justify-center gap-2 text-red-400",children:[(0,s.jsx)(c,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:a}),(0,s.jsx)("button",{onClick:S,className:"ml-2 text-red-300 hover:text-red-200 underline",children:"Try again"})]})]},"upload"),("uploading"===e||"ocr"===e||"normalizing"===e||"generating"===e)&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center py-12",children:[(0,s.jsx)(d,{className:"w-8 h-8 text-primary-500 mx-auto mb-4 animate-spin"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:k()}),(0,s.jsx)("div",{className:"flex justify-center items-center gap-4 mt-6",children:["OCR","Normalize","Generate"].map((t,a)=>{let r=a+1,l="ocr"===e?1:"normalizing"===e?2:"generating"===e?3:0;return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(r<=l?"bg-primary-500 text-white":"bg-slate-700 text-slate-400"),children:r}),(0,s.jsx)("span",{className:"ml-2 text-slate-300 text-sm",children:t}),a<2&&(0,s.jsx)("div",{className:"w-8 h-0.5 mx-4 ".concat(r<l?"bg-primary-500":"bg-slate-700")})]},t)})})]},"processing"),"complete"===e&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(m,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Playlist Ready!"}),(0,s.jsx)("p",{className:"text-slate-300",children:k()})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-white mb-4",children:["Artists Detected (",h.length,")"]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:h.slice(0,12).map((e,t)=>(0,s.jsxs)("div",{className:"bg-slate-800/50 px-3 py-2 rounded-lg border border-slate-700",children:[(0,s.jsx)("div",{className:"font-medium text-white text-sm truncate",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-slate-400",children:[e.confidence,"% confidence"]})]},t))}),h.length>12&&(0,s.jsxs)("p",{className:"text-slate-400 text-sm mt-2",children:["and ",h.length-12," more..."]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-white mb-4",children:["Generated Playlist (",y.length," tracks)"]}),(0,s.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:y.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-slate-800/30 rounded-lg border border-slate-700/50 hover:border-slate-600/50 transition-colors",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-slate-700 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(m,{className:"w-6 h-6 text-slate-400"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-medium text-white truncate",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-slate-400 truncate",children:e.artist})]}),e.spotifyUrl&&(0,s.jsx)("a",{href:e.spotifyUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-slate-400 hover:text-green-400 transition-colors",title:"Open in Spotify",children:(0,s.jsx)(x,{className:"w-4 h-4"})})]},t))})]}),(0,s.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,s.jsx)("button",{onClick:S,className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-full font-medium transition-colors",children:"Try Another Poster"}),(0,s.jsx)("button",{className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-full font-medium transition-colors",disabled:!0,title:"Spotify auth not implemented in demo",children:"Save to Spotify"})]})]},"results")]})]})}}},function(e){e.O(0,[956,971,117,744],function(){return e(e.s=6056)}),_N_E=e.O()}]);